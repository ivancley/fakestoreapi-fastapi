# üöÄ Fake Store API - Integra√ß√£o Resiliente com FastAPI

![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.120.3-green.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Latest-blue.svg)
![Redis](https://img.shields.io/badge/Redis-Latest-red.svg)
![Celery](https://img.shields.io/badge/Celery-5.5.3-green.svg)

Uma API RESTful moderna, escal√°vel e resiliente que integra dados da [FakeStoreAPI](https://fakestoreapi.com/), implementando estrat√©gias avan√ßadas de cache, processamento ass√≠ncrono e fallback autom√°tico para garantir alta disponibilidade mesmo em cen√°rios de falha da API externa.

## √çndice

- [Sobre o Projeto](#-sobre-o-projeto)
- [Caracter√≠sticas Principais](#-caracter√≠sticas-principais)
- [Arquitetura](#-arquitetura)
- [Tecnologias](#-tecnologias)
- [Estrat√©gia de Resili√™ncia](#-estrat√©gia-de-resili√™ncia-e-cache)
- [Pr√©-requisitos](#-pr√©-requisitos)
- [Instala√ß√£o](#-instala√ß√£o)
- [Estrutura do Projeto](#-estrutura-do-projeto)
- [Endpoints](#-endpoints)
- [Documenta√ß√£o](#-documenta√ß√£o)

## Sobre o Projeto

Este projeto demonstra a implementa√ß√£o de uma arquitetura robusta para integra√ß√£o com APIs externas, focando em:

- **Alta Disponibilidade**: Sistema continua funcionando mesmo quando a API externa est√° indispon√≠vel
- **Performance Otimizada**: Cache em mem√≥ria (Redis) com atualiza√ß√£o ass√≠ncrona via Celery
- **Escalabilidade Horizontal**: Arquitetura modular que permite escalar componentes independentemente
- **Seguran√ßa**: Autentica√ß√£o JWT com controle de acesso baseado em perfis (ADMIN/USER)
- **Manutenibilidade**: Padr√£o Clean Architecture com separa√ß√£o clara de responsabilidades

## Caracter√≠sticas Principais

### Autentica√ß√£o e Autoriza√ß√£o

- **Autentica√ß√£o JWT**: Sistema stateless com tokens de acesso e refresh
- **Controle de Acesso por Perfil**:
  - **ADMIN**: Visualiza e gerencia favoritos de todos os usu√°rios
  - **USER**: Visualiza e gerencia apenas seus pr√≥prios favoritos

### Performance e Escalabilidade

- **Cache em Mem√≥ria (Redis)**: Redu√ß√£o dr√°stica de lat√™ncia para consultas frequentes
- **Processamento Ass√≠ncrono (Celery)**: Atualiza√ß√£o de cache e persist√™ncia em background
- **Arquitetura Modular**: Padr√£o Controller ‚Üí Use Case ‚Üí Service
- **Escalabilidade Independente**: Cada componente pode ser escalado separadamente:
  - M√∫ltiplas r√©plicas do FastAPI para maior throughput
  - Workers Celery dedicados para tarefas pesadas
  - Clusters Redis e PostgreSQL para alta disponibilidade

### Resili√™ncia

- **Fallback Autom√°tico**: Em caso de falha da API externa, retorna dados do banco local
- **TTL Configur√°vel**: Tempo de vida do cache ajust√°vel via vari√°veis de ambiente
- **Tratamento de Erros**: Respostas consistentes mesmo em cen√°rios de erro

### Integridade dos Dados

- **PostgreSQL**: Banco relacional com integridade referencial
- **√çndices Otimizados**: Consultas eficientes em campos de busca
- **Migra√ß√µes Versionadas**: Alembic para controle de schema

## Arquitetura

O projeto segue os princ√≠pios de **Clean Architecture** e **SOLID**, organizando o c√≥digo em camadas bem definidas:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FastAPI (Controller)                 ‚îÇ
‚îÇ              Camada de apresenta√ß√£o/HTTP                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Use Case Layer                       ‚îÇ
‚îÇ         Orquestra√ß√£o de regras de neg√≥cio               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Service Layer                        ‚îÇ
‚îÇ    L√≥gica de neg√≥cio e integra√ß√£o com servi√ßos          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL   ‚îÇ          ‚îÇ      Redis        ‚îÇ
‚îÇ  (Persist√™ncia)‚îÇ          ‚îÇ     (Cache)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ     Celery     ‚îÇ
                            ‚îÇ  (Background)  ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Fluxo de Dados

1. **Requisi√ß√£o HTTP** ‚Üí Controller recebe e valida
2. **Use Case** ‚Üí Orquestra a l√≥gica de neg√≥cio
3. **Service** ‚Üí Executa opera√ß√µes espec√≠ficas
4. **Cache/DB** ‚Üí Acessa dados conforme estrat√©gia de resili√™ncia

## Tecnologias


| Categoria                | Tecnologia      | Vers√£o | Uso                          |
| -------------------------- | ----------------- | --------- | ------------------------------ |
| **Linguagem**            | Python          | 3.11+   | Linguagem principal          |
| **Framework Web**        | FastAPI         | 0.120.3 | API REST ass√≠ncrona         |
| **Banco de Dados**       | PostgreSQL      | Latest  | Persist√™ncia principal      |
| **Cache/Fila**           | Redis           | Latest  | Cache e broker do Celery     |
| **Tarefas Ass√≠ncronas** | Celery          | 5.5.3   | Processamento em background  |
| **ORM**                  | SQLAlchemy      | 2.0.44  | Mapeamento objeto-relacional |
| **Migra√ß√µes**          | Alembic         | 1.17.1  | Versionamento de schema      |
| **Autentica√ß√£o**       | PyJWT           | 2.10.1  | Tokens JWT                   |
| **Valida√ß√£o**          | Pydantic        | 2.12.3  | Valida√ß√£o de dados         |
| **Documenta√ß√£o**       | Swagger/OpenAPI | -       | Documenta√ß√£o interativa    |

## Estrat√©gia de Resili√™ncia e Cache

A aplica√ß√£o implementa uma estrat√©gia de **Cache-Aside Pattern** com fallback autom√°tico:

### Fluxo de Consulta de Produtos

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Cliente   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ 1. Requisi√ß√£o
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FastAPI App   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ 2. Verifica Cache
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Cache Hit? ‚îÄ‚îÄ‚ñ∫ Retorna dados do Redis
‚îÇ      Redis      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Cache Miss?
       ‚îÇ 3. Consulta API Externa
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Sucesso? ‚îÄ‚îÄ‚ñ∫ Atualiza Cache + DB (async)
‚îÇ  FakeStoreAPI   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Falha?
       ‚îÇ 4. Fallback
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Retorna dados do PostgreSQL
‚îÇ   PostgreSQL    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Detalhamento do Fluxo

#### 1 **Consulta ao Redis (Cache Hit)**

- Sistema verifica se os dados est√£o em cache
- TTL configur√°vel via vari√°vel de ambiente
- **Resposta imediata** se dados v√°lidos encontrados

#### 2 **Cache Miss - Requisi√ß√£o √† API Externa**

- Se cache ausente ou expirado, consulta a FakeStoreAPI
- Ao obter resposta bem-sucedida:
  - Retorna dados ao cliente imediatamente
  - Envia tarefa ass√≠ncrona ao Celery para:
    - Atualizar cache Redis
    - Persistir/atualizar no PostgreSQL

#### 3 **Falha na API Externa - Fallback Autom√°tico**

- Se FakeStoreAPI estiver indispon√≠vel:
  - Sistema consulta PostgreSQL automaticamente
  - Retorna dados locais (√∫ltima vers√£o conhecida)
  - Cliente recebe resposta consistente sem erro

> **Nota**: Este comportamento √© aplicado tanto em `/api/v1/fakestoreapi` (lista) quanto em `/api/v1/fakestoreapi/{id}` (detalhe).

## Pr√©-requisitos

### Op√ß√£o 1: Instala√ß√£o Local

- **Python** 3.11 ou superior
- **PostgreSQL** (inst√¢ncia local ou remota)
- **Redis** (inst√¢ncia local ou remota)
- **Git** (para clonar o reposit√≥rio)

### Op√ß√£o 2: Instala√ß√£o com Docker (Recomendado)

- **Docker** 20.10 ou superior
- **Docker Compose** 2.0 ou superior
- **Git** (para clonar o reposit√≥rio)

> üí° **Recomenda√ß√£o**: Use Docker para uma instala√ß√£o mais r√°pida e sem necessidade de configurar PostgreSQL e Redis manualmente.

## Instala√ß√£o

### 1. Clone o reposit√≥rio

```bash
git clone git@github.com:ivancley/fakestoreapi-fastapi.git
cd fakestoreapi-fastapi
```

### 2. Crie e ative o ambiente virtual

```bash
# Criar ambiente virtual
python3 -m venv .venv

# Ativar ambiente virtual
# Linux/Mac:
source .venv/bin/activate
# Windows:
# .venv\Scripts\activate
```

### 3. Instale as depend√™ncias

```bash
pip install -r requirements.txt
```

### 4. Configure as vari√°veis de ambiente

Crie um arquivo `.env` baseado no `.env_example` e configure:

```bash
# Exemplo de vari√°veis necess√°rias
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
JWT_SECRET_KEY=your-secret-key-here
CACHE_TTL=3600  # TTL do cache em segundos
```

### 5. Execute as migra√ß√µes

```bash
alembic upgrade head
```

### 6. Inicie os servi√ßos

**Terminal 1 - Celery Worker:**

```bash
celery -A api.utils.celery worker --loglevel=info
```

**Terminal 2 - FastAPI Server:**

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 7. Usu√°rio Administrador

Ao executar as migra√ß√µes, um usu√°rio administrador √© criado automaticamente com as seguintes credenciais:

- **Email**: `admin@gmail.com`
- **Senha**: `Senha@123`
- **Permiss√µes**: `ADMIN`

> **Nota**: Este usu√°rio √© criado pela migra√ß√£o `create_admin_user`. Se o usu√°rio j√° existir, a migra√ß√£o n√£o criar√° duplicatas.

## Instala√ß√£o com Docker

A forma mais simples de executar a aplica√ß√£o √© utilizando Docker Compose, que configura automaticamente todos os servi√ßos necess√°rios.

### Pr√©-requisitos

- **Docker** 20.10 ou superior
- **Docker Compose** 2.0 ou superior

### Passos para Execu√ß√£o

1. **Clone o reposit√≥rio** (se ainda n√£o fez):

```bash
git clone git@github.com:ivancley/fakestoreapi-fastapi.git
cd fakestoreapi-fastapi
```

2. **Configure as vari√°veis de ambiente** (opcional):

Crie um arquivo `.env` na raiz do projeto para personalizar configura√ß√µes:

```bash
# .env
JWT_SECRET_KEY=sua-chave-secreta-aqui
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=20
REFRESH_TOKEN_EXPIRE_DAYS=1
REDIS_TTL=300
```

> **Nota**: Se n√£o criar o arquivo `.env`, valores padr√£o ser√£o utilizados. **Importante**: Altere `JWT_SECRET_KEY` em produ√ß√£o!

3. **Inicie todos os servi√ßos**:

```bash
docker-compose up -d
```

Este comando ir√°:

- Construir a imagem da aplica√ß√£o
- Iniciar PostgreSQL na porta 5432
- Iniciar Redis na porta 6379
- Iniciar a API FastAPI na porta 8000
- Iniciar o worker Celery
- Executar as migra√ß√µes do banco automaticamente
- Criar usu√°rio administrador automaticamente (via migra√ß√£o)

4. **Verifique o status dos containers**:

```bash
docker-compose ps
```

5. **Acompanhe os logs** (opcional):

```bash
# Logs de todos os servi√ßos
docker-compose logs -f

# Logs apenas da API
docker-compose logs -f api

# Logs apenas do Celery
docker-compose logs -f celery
```

6. **Usu√°rio Administrador**:

Ao executar as migra√ß√µes (que acontecem automaticamente ao iniciar os containers), um usu√°rio administrador √© criado automaticamente com as seguintes credenciais:

- **Email**: `admin@gmail.com`
- **Senha**: `Senha@123`
- **Permiss√µes**: `ADMIN`

> **Nota**: Este usu√°rio √© criado pela migra√ß√£o `2312760d89d5_create_admin_user.py`. Voc√™ pode fazer login imediatamente ap√≥s os containers iniciarem usando essas credenciais.

### Comandos √öteis

```bash
# Parar todos os servi√ßos
docker-compose down

# Parar e remover volumes (apaga dados do banco)
docker-compose down -v

# Reconstruir as imagens
docker-compose build --no-cache

# Reiniciar um servi√ßo espec√≠fico
docker-compose restart api

# Executar comandos dentro do container
docker-compose exec api bash
docker-compose exec api alembic upgrade head
```

### Acessar a Aplica√ß√£o

Ap√≥s iniciar os servi√ßos, a API estar√° dispon√≠vel em:

- **API**: http://localhost:8000
- **Documenta√ß√£o Swagger**: http://localhost:8000/docs
- **Documenta√ß√£o ReDoc**: http://localhost:8000/redoc
- **Health Check**: http://localhost:8000/health

###  Credenciais do Usu√°rio Administrador

Um usu√°rio administrador √© criado automaticamente durante a execu√ß√£o das migra√ß√µes do banco de dados. Use estas credenciais para fazer login:


| Campo           | Valor             |
| ----------------- | ------------------- |
| **Email**       | `admin@gmail.com` |
| **Senha**       | `Senha@123`       |
| **Permiss√µes** | `ADMIN`           |

>  **Importante**: Altere a senha padr√£o em ambientes de produ√ß√£o! O usu√°rio √© criado pela migra√ß√£o `2312760d89d5_create_admin_user.py` e n√£o ser√° duplicado se j√° existir.

### Estrutura dos Servi√ßos no Docker

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Docker Compose Network          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ   API    ‚îÇ  ‚îÇ  Celery  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ (FastAPI)‚îÇ  ‚îÇ  Worker  ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ       ‚îÇ             ‚îÇ                   ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ             ‚îÇ                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ      PostgreSQL      ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ        Redis         ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  (Cache + Broker)    ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Estrutura do Projeto

```
fakestoreapi-fastapi-ia/
‚îÇ
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Utilit√°rios compartilhados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ celery.py      # Configura√ß√£o do Celery
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db_services.py # Conex√µes com banco
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py  # Tratamento de exce√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.py    # Autentica√ß√£o JWT
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ v1/                # Vers√£o 1 da API
‚îÇ       ‚îú‚îÄ‚îÄ _shared/       # Modelos e schemas compartilhados
‚îÇ       ‚îú‚îÄ‚îÄ account/       # Autentica√ß√£o e registro
‚îÇ       ‚îú‚îÄ‚îÄ user/          # Gerenciamento de usu√°rios
‚îÇ       ‚îú‚îÄ‚îÄ fakestoreapi/  # Integra√ß√£o com FakeStoreAPI
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ services/  # Servi√ßos de API, cache e background
‚îÇ       ‚îî‚îÄ‚îÄ favorite/      # Sistema de favoritos
‚îÇ
‚îú‚îÄ‚îÄ migrations/            # Migra√ß√µes do Alembic
‚îú‚îÄ‚îÄ main.py               # Aplica√ß√£o FastAPI principal
‚îú‚îÄ‚îÄ create_inicial_user.py # Script de cria√ß√£o de usu√°rio inicial (opcional, usu√°rio admin √© criado via migra√ß√£o)
‚îú‚îÄ‚îÄ requirements.txt      # Depend√™ncias do projeto
‚îî‚îÄ‚îÄ alembic.ini          # Configura√ß√£o do Alembic
```

## Endpoints Principais

### Autentica√ß√£o (`/api/v1/account`)

- `POST /register` - Registrar novo usu√°rio
- `POST /login` - Autenticar e obter token JWT
- `POST /refresh` - Renovar token de acesso

### Usu√°rios (`/api/v1/users`)

- `GET /users` - Listar usu√°rios (com filtros e pagina√ß√£o)
- `GET /users/{id}` - Obter usu√°rio por ID
- `PUT /users/{id}` - Atualizar usu√°rio
- `DELETE /users/{id}` - Deletar usu√°rio

### Produtos (`/api/v1/fakestoreapi`)

- `GET /fakestoreapi` - Listar todos os produtos
- `GET /fakestoreapi/{id}` - Obter produto por ID

### Favoritos (`/api/v1/favorites`)

- `GET /favorites` - Listar favoritos do usu√°rio
- `POST /favorites` - Adicionar produto aos favoritos
- `GET /favorites/{id}` - Obter favorito por ID
- `DELETE /favorites/{id}` - Remover favorito

### Health Check

- `GET /health` - Status da API

> **Nota**: Todos os endpoints (exceto `/register` e `/login`) requerem autentica√ß√£o via JWT.

## Documenta√ß√£o

A documenta√ß√£o interativa da API est√° dispon√≠vel via Swagger UI:

```
http://localhost:8000/docs
```

Alternativamente, a documenta√ß√£o em formato ReDoc:

```
http://localhost:8000/redoc
```

## Conceitos Aplicados

Este projeto demonstra a aplica√ß√£o pr√°tica de:

- **Clean Architecture** - Separa√ß√£o de responsabilidades
- **SOLID Principles** - C√≥digo extens√≠vel e manuten√≠vel
- **Design Patterns** - Cache-Aside, Repository, Use Case
- **Async/Await** - Programa√ß√£o ass√≠ncrona em Python
- **JWT Authentication** - Autentica√ß√£o stateless
- **Database Migrations** - Versionamento de schema
- **Background Tasks** - Processamento ass√≠ncrono
- **Error Handling** - Tratamento robusto de erros
- **API Documentation** - OpenAPI/Swagger

---

Se este projeto foi √∫til para voc√™, considere dar uma estrela no reposit√≥rio!
